<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pro Studio - All-in-One</title>
<style>
  /* Reset & Body */
  * { box-sizing:border-box; margin:0; padding:0; }
  body { font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #1a1a1a, #111); color:#fff; padding:20px; }
  
  /* Headings */
  h1, h2 { text-align:center; margin-bottom:15px; text-shadow: 2px 2px 8px rgba(0,0,0,0.5); }
  h2 { margin-top:30px; }

  /* Buttons */
  .btn { background:linear-gradient(90deg,#1E90FF,#00BFFF); color:white; padding:12px 25px; border:none; border-radius:8px; cursor:pointer; font-weight:bold; margin:5px; transition:all 0.3s ease; }
  .btn:hover { transform:scale(1.05); background:linear-gradient(90deg,#00BFFF,#1E90FF); }

  /* Inputs */
  input[type=file], input[type=text], input[type=range], select, textarea { width:100%; padding:10px; border-radius:8px; border:none; margin:5px 0; background:#222; color:#fff; font-size:1rem; }
  input[type=range] { accent-color:#00BFFF; }

  /* Containers */
  .section { background: rgba(255,255,255,0.05); padding:20px; border-radius:12px; margin-bottom:25px; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
  .flex-center { display:flex; justify-content:center; flex-wrap:wrap; gap:10px; }

  /* Video */
  video { display:block; margin:20px auto; max-width:90%; border-radius:12px; border:2px solid #00BFFF; box-shadow: 0 0 20px #00BFFF; }

  /* Track list */
  .track { display:flex; align-items:center; gap:10px; background:#222; padding:10px; border-radius:8px; margin:5px 0; }

  /* Textarea */
  textarea { resize:none; }

  /* Labels */
  label { display:block; margin:10px 0 5px; font-weight:bold; }

</style>
</head>
<body>

<h1>üéµ Pro Studio - All-in-One</h1>

<!-- Music Controls -->
<div class="section">
  <h2>Background Music</h2>
  <div class="flex-center">
    <button class="btn" id="playAudio">‚ñ∂ Play Music</button>
    <button class="btn" id="pauseAudio">‚è∏ Pause Music</button>
  </div>
</div>

<!-- Video Upload & Trim -->
<div class="section">
  <h2>Video Upload & Trim</h2>
  <input type="file" id="videoUpload" accept="video/*">
  <div class="flex-center">
    <button class="btn" id="trimVideo">‚úÇ Trim 0-5s</button>
  </div>
  <video id="videoPlayer" controls></video>
</div>

<!-- Multitrack Audio -->
<div class="section">
  <h2>Multitrack Audio</h2>
  <div id="tracksContainer"></div>
  <div class="flex-center">
    <button class="btn" id="addTrack">‚ûï Add Track</button>
    <button class="btn" id="mixTracks">üéö Mix Tracks</button>
  </div>
</div>

<!-- Voice Modulation -->
<div class="section">
  <h2>Voice Modulation</h2>
  <label>Pitch Control</label>
  <input type="range" id="pitchSlider" min="0.5" max="2" step="0.05" value="1">
  <div class="flex-center">
    <button class="btn" id="playVoice">üîä Play Modulated Voice</button>
  </div>
</div>

<!-- Speech Recognition -->
<div class="section">
  <h2>Speech Recognition</h2>
  <textarea id="speechText" placeholder="Your speech transcript will appear here..."></textarea>
  <div class="flex-center">
    <button class="btn" id="startSpeech">üé§ Start Recognition</button>
    <button class="btn" id="stopSpeech">‚èπ Stop Recognition</button>
  </div>
</div>

<!-- Presets -->
<div class="section">
  <h2>Presets</h2>
  <input type="text" id="presetName" placeholder="Enter preset name">
  <div class="flex-center">
    <button class="btn" id="savePreset">üíæ Save Preset</button>
    <select id="loadPreset"></select>
    <button class="btn" id="applyPreset">‚ö° Apply Preset</button>
  </div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/@ffmpeg/ffmpeg@0.12.0/dist/ffmpeg.min.js"></script>
<script>
/* Background Music */
const audio = new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3');
document.getElementById('playAudio').onclick = ()=>audio.play();
document.getElementById('pauseAudio').onclick = ()=>audio.pause();

/* FFmpeg Video Trim */
const { createFFmpeg, fetchFile } = FFmpeg;
const ffmpeg = createFFmpeg({ log:true });
let videoFile;
document.getElementById('videoUpload').addEventListener('change', e => { videoFile = e.target.files[0]; });
document.getElementById('trimVideo').addEventListener('click', async ()=>{
  if(!videoFile){ alert("Upload a video first"); return; }
  if(!ffmpeg.isLoaded()) await ffmpeg.load();
  ffmpeg.FS('writeFile','input.mp4', await fetchFile(videoFile));
  await ffmpeg.run('-i','input.mp4','-ss','0','-to','5','output.mp4');
  const data = ffmpeg.FS('readFile','output.mp4');
  const url = URL.createObjectURL(new Blob([data.buffer], {type:'video/mp4'}));
  document.getElementById('videoPlayer').src = url;
});

/* Multitrack Audio */
const tracksContainer = document.getElementById('tracksContainer');
let tracks = [];
document.getElementById('addTrack').onclick = ()=>{
  const div = document.createElement('div'); div.className='track';
  const input = document.createElement('input'); input.type='file'; input.accept='audio/*';
  div.appendChild(input);
  tracksContainer.appendChild(div);
  tracks.push(input);
};
document.getElementById('mixTracks').onclick = ()=>{
  alert("Multitrack mix simulated. Full mix requires WebAudio API advanced setup.");
};

/* Voice Modulation */
const audioCtx = new (window.AudioContext||window.webkitAudioContext)();
const gainNode = audioCtx.createGain();
let source;
document.getElementById('playVoice').onclick = async ()=>{
  if(!videoFile){ alert("Upload a video first for audio"); return; }
  const pitch = parseFloat(document.getElementById('pitchSlider').value);
  const fileArrayBuffer = await videoFile.arrayBuffer();
  const buffer = await audioCtx.decodeAudioData(fileArrayBuffer);
  if(source) source.stop();
  source = audioCtx.createBufferSource();
  source.buffer = buffer;
  source.playbackRate.value = pitch;
  source.connect(gainNode).connect(audioCtx.destination);
  source.start();
};

/* Speech Recognition */
const speechText = document.getElementById('speechText');
let recognition;
if('webkitSpeechRecognition' in window){
  recognition = new webkitSpeechRecognition();
  recognition.continuous=true; recognition.interimResults=true;
  recognition.onresult = e=>{
    let transcript='';
    for(let i=e.resultIndex;i<e.results.length;i++) transcript+=e.results[i][0].transcript;
    speechText.value=transcript;
  };
} else alert("Speech recognition not supported");
document.getElementById('startSpeech').onclick = ()=>recognition.start();
document.getElementById('stopSpeech').onclick = ()=>recognition.stop();

/* Presets */
function loadPresets(){
  const select = document.getElementById('loadPreset');
  select.innerHTML = '';
  for(const key in localStorage){
    const option = document.createElement('option'); option.value=key; option.text=key;
    select.appendChild(option);
  }
}
document.getElementById('savePreset').onclick = ()=>{
  const name = document.getElementById('presetName').value.trim();
  if(!name) return alert("Enter preset name");
  const preset = { pitch: document.getElementById('pitchSlider').value };
  localStorage.setItem(name, JSON.stringify(preset));
  loadPresets();
};
document.getElementById('applyPreset').onclick = ()=>{
  const name = document.getElementById('loadPreset').value;
  if(!name) return alert("Select preset");
  const preset = JSON.parse(localStorage.getItem(name));
  document.getElementById('pitchSlider').value = preset.pitch;
};
loadPresets();
</script>

</body>
  </html>
